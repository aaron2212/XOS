<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">

<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>sfs.h</title><link rel="stylesheet" type="text/css" href="../styles/main.css" /><script type="text/javascript" src="../styles/main.js"></script><script type="text/javascript">NDLoader.LoadJS("Content", "../styles/");</script></head>

<!-- Generated by Natural Docs, version 2.0.2 -->

<!-- saved from url=(0016)http://localhost -->

<body onload="NDLoader.OnLoad('Content');" class="NDPage NDContentPage">

<a name="Constants"></a><a name="Topic21"></a><div class="CTopic TGroup LC first">
 <div class="CTitle">Constants</div>
</div>

<a name="SFS_constants"></a><a name="Topic22"></a><div class="CTopic TConstant LC">
 <div class="CTitle">SFS constants</div>
 <div class="CBody"><table class="CDefinitionList"><tr><td class="CDLEntry"><a name="BYTES_PER_BLOCK=4096"></a><a name="Topic23"></a>BYTES_PER_BLOCK = 4096</td><td class="CDLDefinition"><p>the number of bytes in each block in the filesystem TOTAL_BLOCKS_OFFSET = 432</p></td></tr><tr><td class="CDLEntry"><a name="ENTRY_SIZE=64"></a><a name="Topic24"></a>ENTRY_SIZE = 64</td><td class="CDLDefinition"><p>the size of an entry in the index area</p></td></tr><tr><td class="CDLEntry"><a name="MAGIC=&quot;SFS&quot;"></a><a name="Topic25"></a>MAGIC = &quot;SFS&quot;</td><td class="CDLDefinition"><p>the filesystem magic number</p></td></tr><tr><td class="CDLEntry"><a name="VOLUME_NAME=&quot;SFS&quot;"></a><a name="Topic26"></a>VOLUME_NAME = &quot;SFS&quot;</td><td class="CDLDefinition"><p>the name of the volume</p></td></tr><tr><td class="CDLEntry"><a name="DIRECTORY_NAME_ENTRY_LEN=54"></a><a name="Topic27"></a>DIRECTORY_NAME_ENTRY_LEN = 54</td><td class="CDLDefinition"><p>the maximum length of a directory name that can be stored in a <b>directory_entry</b> structure until one or more <b>continuation_entry</b> structures are needed</p></td></tr><tr><td class="CDLEntry"><a name="FILENAME_ENTRY_LEN=30"></a><a name="Topic28"></a>FILENAME_ENTRY_LEN = 30</td><td class="CDLDefinition"><p>the maximum length of a file name that can be stored in a <b>file_entry</b> structure until one or more <b>continuation_entry</b> structures are needed</p></td></tr><tr><td class="CDLEntry"><a name="DIRECTORY_NAME_OFFSET=10"></a><a name="Topic29"></a>DIRECTORY_NAME_OFFSET = 10</td><td class="CDLDefinition"><p>the offset into the <b>directory_entry</b> structure where the name of the directory begins</p></td></tr><tr><td class="CDLEntry"><a name="FILENAME_OFFSET=34"></a><a name="Topic30"></a>FILENAME_OFFSET = 34</td><td class="CDLDefinition"><p>the offset into the <b>file_entry</b> structure where the name of the file begins</p></td></tr></table></div>
</div>

<a name="Types"></a><a name="Topic31"></a><div class="CTopic TGroup LC">
 <div class="CTitle">Types</div>
</div>

<a name="entries"></a><a name="Topic32"></a><div class="CTopic TEnumeration LC">
 <div class="CTitle">entries</div>
 <div class="CBody"><p>Entry types</p><table class="CDefinitionList"><tr><td class="CDLEntry"><a name="STARTING_MARKER_ENTRY=0x02"></a><a name="Topic33"></a>STARTING_MARKER_ENTRY = 0x02</td><td class="CDLDefinition"><p>marks the beginning of the index area</p></td></tr><tr><td class="CDLEntry"><a name="UNUSED_ENTRY=0x10"></a><a name="Topic34"></a>UNUSED_ENTRY = 0x10</td><td class="CDLDefinition"><p>marks an entry as unused</p></td></tr><tr><td class="CDLEntry"><a name="DIRECTORY_ENTRY=0x11"></a><a name="Topic35"></a>DIRECTORY_ENTRY = 0x11</td><td class="CDLDefinition"><p>marks an entry as a directory</p></td></tr><tr><td class="CDLEntry"><a name="FILE_ENTRY=0x12"></a><a name="Topic36"></a>FILE_ENTRY = 0x12</td><td class="CDLDefinition"><p>marks an entry as a file</p></td></tr><tr><td class="CDLEntry"><a name="UNUSABLE_ENTRY=0x18"></a><a name="Topic37"></a>UNUSABLE_ENTRY = 0x18</td><td class="CDLDefinition"><p>marks an entry as unusable</p></td></tr><tr><td class="CDLEntry"><a name="DELETED_DIRECTORY_ENTRY=0x19"></a><a name="Topic38"></a>DELETED_DIRECTORY_ENTRY = 0x19</td><td class="CDLDefinition"><p>marks an entry as a directory the was deleted</p></td></tr><tr><td class="CDLEntry"><a name="DELETED_FILE_ENTRY=0x1A"></a><a name="Topic39"></a>DELETED_FILE_ENTRY = 0x1A</td><td class="CDLDefinition"><p>marks an entry as a file that was deleted</p></td></tr><tr><td class="CDLEntry"><a name="VOLUME_IDENTIFIER_ENTRY=0x01"></a><a name="Topic40"></a>VOLUME_IDENTIFIER_ENTRY = 0x01</td><td class="CDLDefinition"><p>marks the end of the volume</p></td></tr></table></div>
</div>

<a name="superblock"></a><a name="Topic41"></a><div class="CTopic TStruct LC">
 <div class="CTitle">superblock</div>
 <div class="CBody"><p>The filesystem superblock</p><table class="CDefinitionList"><tr><td class="CDLEntry">uint8_t reserved0[11]</td><td class="CDLDefinition"><p>reserved for compatibility (boot code)</p></td></tr><tr><td class="CDLEntry">uint8_t reserved1[21]</td><td class="CDLDefinition"><p>reserved for compatibility (legacy BIOS parameter block)</p></td></tr><tr><td class="CDLEntry">uint8_t reserved2[372]</td><td class="CDLDefinition"><p>reserved for compatibility (boot code)</p></td></tr><tr><td class="CDLEntry">uint64_t last_alteration_time</td><td class="CDLDefinition"><p>the time the filesystem was last altered</p></td></tr><tr><td class="CDLEntry">uint64_t data_area_size</td><td class="CDLDefinition"><p>size of the data area in blocks</p></td></tr><tr><td class="CDLEntry">uint64_t index_area_size</td><td class="CDLDefinition"><p>size of the index area in bytes</p></td></tr><tr><td class="CDLEntry">uint8_t magic[3]</td><td class="CDLDefinition"><p>magic number (0x534653 = <b>SFS</b>)</p></td></tr><tr><td class="CDLEntry">uint8_t version</td><td class="CDLDefinition"><p>the filesystem version number (0x10 = 1.0)</p></td></tr><tr><td class="CDLEntry">uint64_t total_blocks</td><td class="CDLDefinition"><p>the total number of blocks in the filesystem</p></td></tr><tr><td class="CDLEntry">uint32_t reserved_blocks</td><td class="CDLDefinition"><p>the number of reserved blocks in the filesystem (including the superblock)</p></td></tr><tr><td class="CDLEntry">uint8_t block_size</td><td class="CDLDefinition"><p>the size of each block in the filesystem</p></td></tr><tr><td class="CDLEntry">uint8_t checksum</td><td class="CDLDefinition"><p>the checksum for integrity checking</p></td></tr><tr><td class="CDLEntry">uint8_t reserved3[64]</td><td class="CDLDefinition"><p>reserved for compatibility (partition table)</p></td></tr><tr><td class="CDLEntry">uint16_t reserved4</td><td class="CDLDefinition"><p>reserved for compatibility (boot signature)</p></td></tr></table></div>
</div>

<a name="directory_entry"></a><a name="Topic42"></a><div class="CTopic TStruct LC">
 <div class="CTitle">directory_entry</div>
 <div class="CBody"><p>Represents a directory in the filesystem</p><table class="CDefinitionList"><tr><td class="CDLEntry">uint8_t type</td><td class="CDLDefinition"><p>the type of entry (0x11 for a directory entry)</p></td></tr><tr><td class="CDLEntry">uint8_t num_cont_entries</td><td class="CDLDefinition"><p>the number of continuation entries following this entry</p></td></tr><tr><td class="CDLEntry">uint64_t timestamp</td><td class="CDLDefinition"><p>the time at which the directory was last modified, or created if it was never modified</p></td></tr><tr><td class="CDLEntry">uint8_t name[54]</td><td class="CDLDefinition"><p>the name of the directory</p></td></tr></table></div>
</div>

<a name="file_entry"></a><a name="Topic43"></a><div class="CTopic TStruct LC">
 <div class="CTitle">file_entry</div>
 <div class="CBody"><p>Represents a file in the filesystem</p><table class="CDefinitionList"><tr><td class="CDLEntry">uint8_t type</td><td class="CDLDefinition"><p>the type of entry (0x12 for a file entry)</p></td></tr><tr><td class="CDLEntry">uint8_t num_cont_entries</td><td class="CDLDefinition"><p>the number of continuation entries following this entry</p></td></tr><tr><td class="CDLEntry">uint64_t timestamp</td><td class="CDLDefinition"><p>the time at which the directory was last modified, or created if it was never modified</p></td></tr><tr><td class="CDLEntry">uint64_t start_block</td><td class="CDLDefinition"><p>the starting block number in the data area</p></td></tr><tr><td class="CDLEntry">uint64_t end_block</td><td class="CDLDefinition"><p>the ending block number in the data area</p></td></tr><tr><td class="CDLEntry">uint64_t size</td><td class="CDLDefinition"><p>the size of the file in bytes</p></td></tr><tr><td class="CDLEntry">uint8_t filename[30]</td><td class="CDLDefinition"><p>the name of the file in UTF-8</p></td></tr></table></div>
</div>

<a name="unusable_entry"></a><a name="Topic44"></a><div class="CTopic TStruct LC">
 <div class="CTitle">unusable_entry</div>
 <div class="CBody"><p>Represents an unusable entry</p><table class="CDefinitionList"><tr><td class="CDLEntry">uint8_t type</td><td class="CDLDefinition"><p>the type of entry (0x18 for an unusable entry)</p></td></tr><tr><td class="CDLEntry">uint8_t reserved0[9]</td><td class="CDLDefinition"><p>unused</p></td></tr><tr><td class="CDLEntry">uint64_t start_block</td><td class="CDLDefinition"><p>the starting block number in the data area</p></td></tr><tr><td class="CDLEntry">uint64_t end_block</td><td class="CDLDefinition"><p>the ending block number in the data area</p></td></tr><tr><td class="CDLEntry">uint8_t reserved1[38]</td><td class="CDLDefinition"><p>unused</p></td></tr></table></div>
</div>

<a name="deleted_directory_entry"></a><a name="Topic45"></a><div class="CTopic TStruct LC">
 <div class="CTitle">deleted_directory_entry</div>
 <div class="CBody"><p>Repesents a directory that was deleted</p><table class="CDefinitionList"><tr><td class="CDLEntry">uint8_t type</td><td class="CDLDefinition"><p>the type of entry (0x19 for a deleted directory entry)</p></td></tr><tr><td class="CDLEntry">uint8_t num_cont_entries</td><td class="CDLDefinition"><p>the number of continuation entries following this entry</p></td></tr><tr><td class="CDLEntry">uint64_t timestamp</td><td class="CDLDefinition"><p>the time when the directory was deleted</p></td></tr><tr><td class="CDLEntry">uint8_t reserved[54]</td><td class="CDLDefinition"><p>unused</p></td></tr></table></div>
</div>

<a name="deleted_file_entry"></a><a name="Topic46"></a><div class="CTopic TStruct LC">
 <div class="CTitle">deleted_file_entry</div>
 <div class="CBody"><p>Represents a file that was deleted</p><table class="CDefinitionList"><tr><td class="CDLEntry">uint8_t type</td><td class="CDLDefinition"><p>the type of entry (0x1A for a deleted file entry)</p></td></tr><tr><td class="CDLEntry">uint8_t num_cont_entries</td><td class="CDLDefinition"><p>the number of continuation entries following this entry</p></td></tr><tr><td class="CDLEntry">uint64_t timestamp</td><td class="CDLDefinition"><p>the time when the file was deleted</p></td></tr><tr><td class="CDLEntry">uint64_t start_block</td><td class="CDLDefinition"><p>the starting block number in the data area</p></td></tr><tr><td class="CDLEntry">uint64_t end_block</td><td class="CDLDefinition"><p>the ending block number in the data area</p></td></tr><tr><td class="CDLEntry">uint64_t size</td><td class="CDLDefinition"><p>the length of the deleted file</p></td></tr><tr><td class="CDLEntry">uint8_t filename[30]</td><td class="CDLDefinition"><p>the name of the deleted file</p></td></tr></table></div>
</div>

<a name="continuation_entry"></a><a name="Topic47"></a><div class="CTopic TStruct LC">
 <div class="CTitle">continuation_entry</div>
 <div class="CBody"><p>Represents a continuation entry. This entry contains directory and file names that are too long to fit into a single entry</p><table class="CDefinitionList"><tr><td class="CDLEntry">uint8_t name[64]</td><td class="CDLDefinition"><p>the continued name of the file or directory name that was too long</p></td></tr></table></div>
</div>

<a name="unused_entry"></a><a name="Topic48"></a><div class="CTopic TStruct LC">
 <div class="CTitle">unused_entry</div>
 <div class="CBody"><p>Represents an unused entry</p><table class="CDefinitionList"><tr><td class="CDLEntry">uint8_t type</td><td class="CDLDefinition"><p>the type of the entry (0x10 for unused)</p></td></tr><tr><td class="CDLEntry">uint8_t reserved[63]</td><td class="CDLDefinition"><p>unused</p></td></tr></table></div>
</div>

<a name="starting_marked_entry"></a><a name="Topic49"></a><div class="CTopic TStruct LC">
 <div class="CTitle">starting_marked_entry</div>
 <div class="CBody"><p>Marks the beginning of the index area</p><table class="CDefinitionList"><tr><td class="CDLEntry">uint8_t type</td><td class="CDLDefinition"><p>the type of the entry (0x02 for starting marker)</p></td></tr><tr><td class="CDLEntry">uint8_t reserved[63]</td><td class="CDLDefinition"><p>unused</p></td></tr></table></div>
</div>

<a name="starting_marked_entry(2)"></a><a name="Topic50"></a><div class="CTopic TStruct LC">
 <div class="CTitle">starting_marked_entry</div>
 <div class="CBody"><p>Marks the end of the volume</p><table class="CDefinitionList"><tr><td class="CDLEntry">uint8_t type</td><td class="CDLDefinition"><p>the type of the entry (0x01 for a volume identifier entry)</p></td></tr><tr><td class="CDLEntry">uint8_t reserved[3]</td><td class="CDLDefinition"><p>reserved</p></td></tr><tr><td class="CDLEntry">uint64_t timestamp</td><td class="CDLDefinition"><p>the time that the volume was last altered</p></td></tr><tr><td class="CDLEntry">uint8_t volume_name[52]</td><td class="CDLDefinition"><p>volume name in UTF-8, null terminated</p></td></tr></table></div>
</div>

<a name="entry"></a><a name="Topic51"></a><div class="CTopic TStruct LC last">
 <div class="CTitle">entry</div>
 <div class="CBody"><p>A structure representing any entry in the filesystem</p><table class="CDefinitionList"><tr><td class="CDLEntry">int type</td><td class="CDLDefinition"><p>the entry type</p></td></tr><tr><td class="CDLEntry">union</td><td class="CDLDefinition"><p>a struct representing the entry in the filesystem</p></td></tr></table></div>
</div>

</body></html>