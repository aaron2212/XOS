<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">

<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>vfs.h</title><link rel="stylesheet" type="text/css" href="../styles/main.css" /><script type="text/javascript" src="../styles/main.js"></script><script type="text/javascript">NDLoader.LoadJS("Content", "../styles/");</script></head>

<!-- Generated by Natural Docs, version 2.0.2 -->

<!-- saved from url=(0016)http://localhost -->

<body onload="NDLoader.OnLoad('Content');" class="NDPage NDContentPage">

<a name="Constants"></a><a name="Topic1"></a><div class="CTopic TGroup LC first">
 <div class="CTitle">Constants</div>
</div>

<a name="VFS_constants"></a><a name="Topic2"></a><div class="CTopic TConstant LC">
 <div class="CTitle">VFS constants</div>
 <div class="CBody"><table class="CDefinitionList"><tr><td class="CDLEntry"><a name="MAX_MOUNTS=64"></a><a name="Topic3"></a>MAX_MOUNTS = 64</td><td class="CDLDefinition"><p>the maximum number of filesystems that can be mounted</p></td></tr><tr><td class="CDLEntry"><a name="FS_NAME_LEN=16"></a><a name="Topic4"></a>FS_NAME_LEN = 16</td><td class="CDLDefinition"><p>the maximum length for the name of a filesystem FS_TYPE_LEN = 16the maximum length for the type of a filesystem</p></td></tr><tr><td class="CDLEntry"><a name="FS_MOUNT_POINT_LEN=32"></a><a name="Topic5"></a>FS_MOUNT_POINT_LEN = 32</td><td class="CDLDefinition"><p>the maximum length for the mount point of a filesystem</p></td></tr></table></div>
</div>

<a name="dirent"></a><a name="Topic6"></a><div class="CTopic TStruct LC">
 <div class="CTitle">dirent</div>
 <div class="CBody"><p>A high level abstraction of the directory in the filesystem</p><table class="CDefinitionList"><tr><td class="CDLEntry">uint8_t* name</td><td class="CDLDefinition"><p>name of the entry within the&nbsp; directory</p></td></tr></table></div>
</div>

<a name="_FILE_typedef'd_as_FILE"></a><a name="Topic7"></a><div class="CTopic TStruct LC">
 <div class="CTitle">_FILE typedef'd as FILE</div>
 <div class="CBody"><p>A high level abstraction of a file in the filesystem</p><table class="CDefinitionList"><tr><td class="CDLEntry">uint8_t mode</td><td class="CDLDefinition"><p>the mode the file is opened in</p></td></tr><tr><td class="CDLEntry">uint64_t size</td><td class="CDLDefinition"><p>the size of the file</p></td></tr><tr><td class="CDLEntry">uint16_t fd</td><td class="CDLDefinition"><p>the file's file descriptor</p></td></tr><tr><td class="CDLEntry">int8_t eof</td><td class="CDLDefinition"><p>used to mark if the file file pointer has reached the end of the file</p></td></tr><tr><td class="CDLEntry">uint64_t position</td><td class="CDLDefinition"><p>the position of the file pointer within the file</p></td></tr><tr><td class="CDLEntry">uint64_t start_block</td><td class="CDLDefinition"><p>the starting block of the file in the filesystem</p></td></tr><tr><td class="CDLEntry">uint8_t *offset</td><td class="CDLDefinition"><p>the offset of the file in the index area of the filesystem</p></td></tr></table></div>
</div>

<a name="_DIR_typedef'd_as_DIR"></a><a name="Topic8"></a><div class="CTopic TStruct LC">
 <div class="CTitle">_DIR typedef'd as DIR</div>
 <div class="CBody"><p>A high level abstraction of a directory in the filesystem</p><table class="CDefinitionList"><tr><td class="CDLEntry">uint16_t fd</td><td class="CDLDefinition"><p>the directory's file description</p></td></tr><tr><td class="CDLEntry">int8_t *dirname</td><td class="CDLDefinition"><p>the name of the directory uint32_t current_dir</p></td></tr><tr><td class="CDLEntry">uint32_t total_entries</td><td class="CDLDefinition"><p>the total entries within this directory</p></td></tr><tr><td class="CDLEntry">uint8_t *offset</td><td class="CDLDefinition"><p>the offset of the directory in the index area of the filesystem</p></td></tr><tr><td class="CDLEntry">struct dirent **entries</td><td class="CDLDefinition"><p>a list of directory entries inside this directory</p></td></tr></table></div>
</div>

<a name="filesystem"></a><a name="Topic9"></a><div class="CTopic TStruct LC">
 <div class="CTitle">filesystem</div>
 <div class="CBody"><p>A structure used to store properties and I/O operations for use with each filesystem</p><table class="CDefinitionList"><tr><td class="CDLEntry">char name[FS_NAME_LEN]</td><td class="CDLDefinition"><p>the name of the filesystem</p></td></tr><tr><td class="CDLEntry">char type[FS_TYPE_LEN]</td><td class="CDLDefinition"><p>the type of the filesystem</p></td></tr><tr><td class="CDLEntry">char mount_point[FS_MOUNT_POINT_LEN]</td><td class="CDLDefinition"><p>the filesystem's mount point</p></td></tr><tr><td class="CDLEntry">bool readonly</td><td class="CDLDefinition"><p>whether the filesystem is in readonly mode, or is readable and writeable</p></td></tr><tr><td class="CDLEntry">void (*init)()</td><td class="CDLDefinition"><p>used to initalize the filesystem (copy information into its superblock)</p></td></tr><tr><td class="CDLEntry">FILE *(*open)(char *filename)</td><td class="CDLDefinition"><p>open a file</p></td></tr><tr><td class="CDLEntry">int (*read)(FILE *stream, char *buf, size_t len)</td><td class="CDLDefinition"><p>read a file</p></td></tr><tr><td class="CDLEntry">void (*write)(FILE *stream, const char *buf, size_t len)</td><td class="CDLDefinition"><p>write a file</p></td></tr><tr><td class="CDLEntry">FILE *(*create)(char *filename)</td><td class="CDLDefinition"><p>create a file</p></td></tr><tr><td class="CDLEntry">DIR *(*opendir)(char *dirname)</td><td class="CDLDefinition"><p>open a directory</p></td></tr><tr><td class="CDLEntry">struct dirent *(*readdir)(DIR *dir)</td><td class="CDLDefinition"><p>read the contents of a directory</p></td></tr><tr><td class="CDLEntry">int (*changedir)(char *dirname)</td><td class="CDLDefinition"><p>change the current working directory</p></td></tr><tr><td class="CDLEntry">int (*closedir)(DIR *)</td><td class="CDLDefinition"><p>close the current directory</p></td></tr><tr><td class="CDLEntry">bool (*rm)(char *filename)</td><td class="CDLDefinition"><p>remove a file from the filesystem</p></td></tr><tr><td class="CDLEntry">bool (*rmdir)(char *dirname)</td><td class="CDLDefinition"><p>remove a directory from the filesystem</p></td></tr></table></div>
</div>

<a name="filesystem.Types"></a><a name="Topic10"></a><div class="CTopic TGroup LC">
 <div class="CTitle">Types</div>
</div>

<a name="filesystem.fs_errors"></a><a name="Topic11"></a><div class="CTopic TEnumeration LC last">
 <div class="CTitle">fs_errors</div>
 <div class="CBody"><p>Filesystem related errors that may occur when registering the filesystem or accessing files</p><table class="CDefinitionList"><tr><td class="CDLEntry"><a name="filesystem.TOO_MANY_MOUNTS=0"></a><a name="Topic12"></a>TOO_MANY_MOUNTS = 0</td><td class="CDLDefinition"><p>the maximum number of filesystem has already been mounted</p></td></tr><tr><td class="CDLEntry"><a name="filesystem.INVALID_STRUCTURE=1"></a><a name="Topic13"></a>INVALID_STRUCTURE = 1</td><td class="CDLDefinition"><p>the filesystem structure is invalid</p></td></tr><tr><td class="CDLEntry"><a name="filesystem.NAME_TOO_LONG=2"></a><a name="Topic14"></a>NAME_TOO_LONG = 2</td><td class="CDLDefinition"><p>the name of the filesystem is too long</p></td></tr><tr><td class="CDLEntry"><a name="filesystem.TYPE_TOO_LONG=3"></a><a name="Topic15"></a>TYPE_TOO_LONG = 3</td><td class="CDLDefinition"><p>the type of the filesystem is too long</p></td></tr><tr><td class="CDLEntry"><a name="filesystem.MOUNT_POINT_TOO_LONG=4"></a><a name="Topic16"></a>MOUNT_POINT_TOO_LONG = 4</td><td class="CDLDefinition"><p>the mount point for the filesystem is too long</p></td></tr><tr><td class="CDLEntry"><a name="filesystem.IO_OPERATION_NOT_SET=5"></a><a name="Topic17"></a>IO_OPERATION_NOT_SET = 5</td><td class="CDLDefinition"><p>one or more of the I/O operations (function pointers) have not been assigned to</p></td></tr><tr><td class="CDLEntry"><a name="filesystem.FS_ALREADY_MOUNTED=6"></a><a name="Topic18"></a>FS_ALREADY_MOUNTED = 6</td><td class="CDLDefinition"><p>the filesystem has already been mounted</p></td></tr><tr><td class="CDLEntry"><a name="filesystem.PATH_NOT_FOUND=7"></a><a name="Topic19"></a>PATH_NOT_FOUND = 7</td><td class="CDLDefinition"><p>the path was not found in the filesystem</p></td></tr><tr><td class="CDLEntry"><a name="filesystem.INVALID_FILENAME=8"></a><a name="Topic20"></a>INVALID_FILENAME = 8</td><td class="CDLDefinition"><p>the file has an invalid name</p></td></tr></table></div>
</div>

</body></html>